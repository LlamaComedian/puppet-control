---

classes:
  - 'profiles::puppet'
  - 'profiles::deployment'
  - 'profiles::ntp'
  - 'profiles::git'
  - 'profiles::log_forwarder'
  #- 'profiles::disable_firewall'
  - 'selinux'
  - 'sudo'


# Prevent sudo from purging unmanaged sudo configs (for vagrant)
sudo::purge: false
sudo::config_file_replace: false

# Set SELinux to enforcing
selinux::mode: enforcing

profiles::ntp::ntp_restrict_array:
  - '127.0.1.0'
  - '127.0.1.1'

profiles::puppet::environment: development

#Add test user NB must be removed (in hiera)for all internal and AWS deployments
accounts:
 lr-test-user:
   comment: lr-test-user
   ssh_key: AAAAB3NzaC1yc2EAAAADAQABAAABAQC2JcuGfXBiaUKCRf9qJ/SSswEy+V7TW0BiN7sfKqycWoWIas7tMKCHdsJSayXO12rz1fP59vCyThUayAdwLrzzVQjGxsN43eS80aGeo83GoxcqGVjNQcNK6NKT5EzbpdxN1FEtSFEVGnpJznpbSetKtwCUuMARVTJ1xtZUZNgWzRkgBRTcaaq6SxulJ42BB3fxReOCswDnTHnHUjk+xigH+QyZgI9Vmp8/k9i6dtV8VTBs32dPaB5SzuP+ljjoW06+UND0MRxl9UeW82UGMLKMXRhL5gBLyDhP+/9lIIeqc9f6p7JU8bJz3pwFVNKxCKW9LjKUAxAUEboiryKx7GYv
   groups:
     - lr-admin

logbroker_extranet_logstash_config: |
  input {
    lumberjack {
      port => 5000
      type => "logs"
      ssl_certificate => "/etc/pki/tls/certs/logstash-forwarder.crt"
      ssl_key => "/etc/pki/tls/private/logstash-forwarder.key"
    }
  }
  output {
    redis {
      host => "localhost"
      data_type => "list"
      key => "logstash"
      codec => json
    }
  }
