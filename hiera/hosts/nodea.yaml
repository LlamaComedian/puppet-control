---

classes:
  - profiles::postgresqlha
#  - profiles::postgresqlha_nodea

postgres_databases:
  register_data:
    user: register_data
    password: md5085815e3463853f3a1e9731b61ddb3a7
    owner: register_data
  user_data:
    user: user_data
    password: md5f5e1477d2e90a5760642db71ea5307d1
    owner: user_data
  replication:
    user: repmgr
    password:
    owner: repmgr

postgres_users:
  deployment:
    password_hash: md5dddbab2fa26c65fadeaa8b1076329a14

pg_hba_rule:
  repmgr_local_rule:
    description: repmgr local access
    type: host
    database: repmgr
    user: repmgr
    address: 127.0.0.1/32
    auth_method: trust
  repmgr_nodea_rule:
    description: repmgr nodea access
    type: host
    database: repmgr
    user: repmgr
    address: 192.168.33.10/32
    auth_method: trust
  replication_nodea_rule:
    description: repmgr nodea access
    type: host
    database: replication
    user: all
    address: 192.168.33.10/32
    auth_method: trust
  repmgr_nodea_rule:
    description: repmgr nodeb access
    type: host
    database: repmgr
    user: repmgr
    address: 192.168.33.20/32
    auth_method: trust
  replication_nodea_rule:
    description: repmgr nodeb access
    type: host
    database: replication
    user: all
    address: 192.168.33.20/32
    auth_method: trust
  repmgr_nodea_rule:
    description: repmgr nodec access
    type: host
    database: repmgr
    user: repmgr
    address: 192.168.33.30/32
    auth_method: trust
  replication_nodea_rule:
    description: repmgr nodec access
    type: host
    database: replication
    user: all
    address: 192.168.33.30/32
    auth_method: trust
